<!DOCTYPE html>
<html lang="en">
  <head class="at-element-marker">
  <title>Map ports from node2 to node4</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Map ports from node2 to node4" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html" />
	<meta property="og:description" content="Verify that the physical ports on node2 map correctly to node4 when upgrading controllers running ONTAP 9.5 to 9.7 by using `system controller replace` comma..." />
  <meta property="og:image" content="https://docs.netapp.com/us-en/ontap-systems-upgrade/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/><meta name="description" content="Verify that the physical ports on node2 map correctly to node4 when upgrading controllers running ONTAP 9.5 to 9.7 by using `system controller replace` comma...">
  <meta name="keywords" content=" map, node2, ports, cluster, broadcast domains, physical ports"><!-- Icons -->
  <link rel="icon" href="/us-en/ontap-systems-upgrade/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed --><!-- CSS Definitions: NetApp CSS should be defined after generic css -->


  <!-- Combined CSS -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-systems-upgrade/css/ie-netappdocs.css">

  
  <link rel="stylesheet" href="/us-en/ontap-systems-upgrade/css/ie-landing-page.css" type="text/css">
  <link rel="stylesheet" href="/us-en/ontap-systems-upgrade/css/ie-tabbed-blocks.css" type="text/css">
  <!-- Canonical url -->
  <link rel="canonical" href="https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html" />
  <link rel="alternate" hreflang="x-default" href="https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html" />
  <link rel="alternate" hreflang="en" href="https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html" />
  <link rel="alternate" hreflang="ja" href="https://docs.netapp.com/ja-jp/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html" />
  <link rel="alternate" hreflang="ko" href="https://docs.netapp.com/ko-kr/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html" />
  <link rel="alternate" hreflang="zh-Hans" href="https://docs.netapp.com/zh-cn/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html" />
  <link rel="alternate" hreflang="zh-Hant" href="https://docs.netapp.com/zh-tw/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html" />
  <link rel="alternate" hreflang="de" href="https://docs.netapp.com/de-de/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html" />
  <link rel="alternate" hreflang="es" href="https://docs.netapp.com/es-es/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html" />
  <link rel="alternate" hreflang="fr" href="https://docs.netapp.com/fr-fr/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html" />
  <link rel="alternate" hreflang="it" href="https://docs.netapp.com/it-it/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html" />
  <!-- Top level site integrations -->
<script type="text/javascript" src="https://cdn.cookielaw.org/consent/72570c5c-fe30-465f-b0e0-b77f7fb4ae34/OtAutoBlock.js"></script>
    <script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-document-language="true" data-domain-script="72570c5c-fe30-465f-b0e0-b77f7fb4ae34"></script>
    <script type="text/javascript">function OptanonWrapper() { }</script>
    <script type="text/plain" class="optanon-category-C0002" src="https://assets.adobedtm.com/60287eadf1ee/c284da483c83/launch-e9ff3acac59f.min.js"></script>
    <script class="optanon-category-C0001">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.setAttributeNode(d.createAttribute('data-ot-ignore'));j.setAttribute('class','optanon-category-C0001');j.async=true;
        j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'';f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MD73T9M');</script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  
  <script>
    $(document).ready(function() {
      const MASTHEAD_OFFSET = 65;
      const SECTIONS = $("main h2, main h3");
      // PAGE NAV - Init
      if (SECTIONS.length == 0) {
        // remove if there is no elements
        /*
        $("#ie-right-navbar").remove();
        $("#ie-right-navbar-collapse").remove();
        */
      } else {
        $(".page-nav-title").css('display', 'block');
        for (var i = 0; i < SECTIONS.length; i++) {
          var sectionId = $(SECTIONS[i]).attr('id');
          var sectionName = $(SECTIONS[i]).text();
          var subClass = $(SECTIONS[i]).is("h3") ? ' page-nav__sublink' : '';
          $("#page-menu").append('<li class="page-nav-item"><a href="#' + sectionId + '" class="page-nav__link' + subClass + '">' + sectionName + '</a></li>');
        }
        $(".page-nav__link").first().addClass('page-nav__link--active');
      }
    });
  </script>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

  <!-- Used for Product Family Page Sidebar Visibility --><!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script><script src='/us-en/ontap-systems-upgrade/js/na-search.js'></script><script src='/us-en/ontap-systems-upgrade/js/ie-clouddocs.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><script>
    /*
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
      */
  </script>
  <script src='/us-en/ontap-systems-upgrade/js/custom-dropdown.js'></script>
  <script src='/us-en/ontap-systems-upgrade/js/FileSaver.min.js'></script>
  <script src='/us-en/ontap-systems-upgrade/js/jszip-utils.min.js'></script>
  <script src='/us-en/ontap-systems-upgrade/js/jszip.min.js'></script><script src='/us-en/ontap-systems-upgrade/js/ie-pdf-ux.js'></script></head>


  <body class role="document" data-flavor="">
    <div class="skip-to-main">
      <a href="#main" >Skip to main content</a>
    </div><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MD73T9M"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="page" class="">
      <div id="ie-phone-menu" class=""></div>
      <div id="ie-content-wrap" class="">
        <nav id="ie-new-header">
    <ul>
        <li id="ie-phone-menu-button">
            <a href="#">
                <image id="" src="/us-en/ontap-systems-upgrade/images/hamburger.svg" alt="menu" />
            </a>
        </li>

        <li>
            <a href="https://www.netapp.com/">
                <image id="ie-header-logo" src="/us-en/ontap-systems-upgrade/images/netapp_logo.svg" alt="netapp" />
            </a>
        </li>
        <li id="ie-header-docs">
            <a href="https://www.netapp.com/support-and-training/documentation/">Docs</a>
        </li>

        <!-- Empty container to push header left with or without lang selector -->
        <li id="empty-container" style="margin-left: auto">
        </li>
        <!-- Start Language Selector --><li id="ie-language-dropdown">
            <div id="language-dropdown" class="custom-dropdown custom-dropdown-lang">
                <div class="custom-dropdown-select custom-dropdown-select-lang">
                    <img src="/us-en/ontap-systems-upgrade/images/language_white_24dp.svg" class="n-globe__icon" />
                    <span class="lang-name">English</span>
                    <img src="/us-en/ontap-systems-upgrade/images/dropdown-arrow.svg" alt="" class="custom-icon chevrondown header invisible" />
                    <img src="/us-en/ontap-systems-upgrade/images/dropdown-arrow.svg" alt="" class="custom-icon chevronup header" />
                    </button>
                </div>

                <ul class="custom-dropdown-menu"><li>
                        <a href="https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html"
                            target="_self"><span translate="no" class="notranslate">English</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/ja-jp/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html"
                            target="_self"><span translate="no" class="notranslate">日本語</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/ko-kr/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html"
                            target="_self"><span translate="no" class="notranslate">한국어</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/zh-cn/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html"
                            target="_self"><span translate="no" class="notranslate">简体中文</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/zh-tw/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html"
                            target="_self"><span translate="no" class="notranslate">繁體中文</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/de-de/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html"
                            target="_self"><span translate="no" class="notranslate">Deutsch</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/es-es/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html"
                            target="_self"><span translate="no" class="notranslate">Español</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/fr-fr/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html"
                            target="_self"><span translate="no" class="notranslate">Français</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/it-it/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html"
                            target="_self"><span translate="no" class="notranslate">Italiano</span></a>
                    </li></ul>
            </div>
            </li>
        <!-- End Language Selector -->


        <li id="ie-allnetapp">
            <div id="allnetapp-dropdown" class="custom-dropdown custom-dropdown-allnetapp">
                <div class="custom-dropdown-select custom-dropdown-select-allnetapp">
                    <img src="/us-en/ontap-systems-upgrade/images/apps_white_24dp.svg" alt="" class="allnetapp-icon" />
                    <span class="allnetapp-name">All NetApp</span>
                    <img src="/us-en/ontap-systems-upgrade/images/dropdown-arrow.svg" alt="" class="custom-icon chevrondown header invisible" />
                    <img src="/us-en/ontap-systems-upgrade/images/dropdown-arrow.svg" alt="" class="custom-icon chevronup header" />
                    </button>
                </div>

                <ul class="custom-dropdown-menu allnetapp-dropdown">
                    <li>
                        <a href="https://bluexp.netapp.com/"
                            target="_self"><span translate="no" class="notranslate">BlueXP</span></a>
                    </li>
                    <li>
                        <a href="https://mysupport.netapp.com/site/"
                            target="_self"><span translate="no" class="notranslate">Support</span></a>
                    </li>
                    <li>
                        <a href="https://kb.netapp.com/"
                            target="_self"><span translate="no" class="notranslate">Knowledge Base</span></a>
                    </li>
                    <li>
                        <a href="https://www.netapp.com/support-and-training/netapp-learning-services/"
                            target="_self"><span translate="no" class="notranslate">Training</span></a>
                    </li>
                </ul>
            </div>

        </li>

    </ul>
</nav>

        <main id="n-main-content" class="n-main-content">
          <!-- Start Documentation Content -->
<div class="ie-main">

<div id="ie-new-sidebar-collapse" style="display: none">
    <img id="sidebar-expand" class="ie-searchbox-icon" src="/us-en/ontap-systems-upgrade/images/double_arrow.svg" alt="" />
</div>
<div id="ie-new-sidebar">
    <div id="ie-product-identity-lockup">
        <div id="sidebar-collapse" class="">
            <img src="/us-en/ontap-systems-upgrade/images/double_arrow.svg" alt="" />
        </div>
        <div id="ie-breadcrumb" class="">
  <ul class="ie-breadcrumb">
    <li class="">
      <a href="https://docs.netapp.com">All docs</a>
    </li>
    
    

    
    <li class="">
      <a href="https://docs.netapp.com/us-en/ontap-systems-family/">
        AFF and FAS Systems
      </a>
    </li>
    
  </ul>
  
  <div class="ie-product-name" >
    <!--<a href="/us-en/ontap-systems-upgrade/">-->
      Upgrade controllers
    <!--</a>-->
  </div>
</div>

            

        
        

<div id="ie-searchbox" class="ie-searchbox-sidebar ">
    <img class="ie-searchbox-icon" src="/us-en/ontap-systems-upgrade/images/loupe.svg" alt=""/>
    <div id="react-search" 
        data-search-html="/us-en/ontap-systems-upgrade/search.html" 
        data-type="widget"
        data-placeholder="Search documentation"
        data-no-results-found="No results were found for {query}"
        data-did-you-mean="Search for {suggestion}."
        data-no-results-found-did-you-mean="No results found for {query}. Did you mean {suggestion}?"
        data-results-found="{hitCount} results found"
        data-error-message="An error occurred. Please try again."
        data-error-reset="Reset search"
        data-sk-es-pf-indexes="" 
        data-flavor="">
    </div>
</div>
        
    </div>
    <div id="ie-new-toc"><script>
  let sidebarAccordion = true;

  /* specific css rules for Mac */
  if(navigator.platform.match('Mac') !== null) {
    document.body.setAttribute('class', 'OSX');
  }

</script>

<div id="ie-sidebar-container">
  <ul id="ie-sidebar-list" ><li 
      data-pdf-exists="true" 
      data-pdf-filename="AFF and FAS System Upgrade Documentation"
      data-li-level="1#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/index.html" 
    ><a class="ie-sidebar-menuitem-1 " href="/us-en/ontap-systems-upgrade/index.html">
        AFF and FAS System Upgrade Documentation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Choose your controller hardware upgrade procedure"
      data-li-level="1#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/choose_controller_upgrade_procedure.html" 
    ><a class="ie-sidebar-menuitem-1 " href="/us-en/ontap-systems-upgrade/choose_controller_upgrade_procedure.html">
        Choose your controller hardware upgrade procedure
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Upgrade by using aggregate relocation"
      data-li-level="1" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-1  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Upgrade by using aggregate relocation</div>-->
         Upgrade by using aggregate relocation
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="2#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl/index.html" 
    ><a class="ie-sidebar-menuitem-2 " href="/us-en/ontap-systems-upgrade/upgrade-arl/index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Use "system controller replace" commands to upgrade controller models in the same chassis"
      data-li-level="2" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-2  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Use "system controller replace" commands to upgrade controller models in the same chassis</div>-->
         Use "system controller replace" commands to upgrade controller models in the same chassis
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/index.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Decide whether to use the aggregate relocation content"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/decide_to_use_the_aggregate_relocation_guide.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/decide_to_use_the_aggregate_relocation_guide.html">
        Decide whether to use the aggregate relocation content
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Required tools and documentation"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/required_tools_and_documentation.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/required_tools_and_documentation.html">
        Required tools and documentation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Guidelines for upgrading controllers"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/guidelines_for_upgrading_controllers_with_arl.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/guidelines_for_upgrading_controllers_with_arl.html">
        Guidelines for upgrading controllers
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview of the ARL upgrade"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/overview_of_the_arl_upgrade.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/overview_of_the_arl_upgrade.html">
        Overview of the ARL upgrade
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 1. Prepare for upgrade (upgrade to AFF A900 or FAS9500)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 1. Prepare for upgrade</div>-->
         Stage 1. Prepare for upgrade
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/stage_1_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/stage_1_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify the upgrade hardware"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/verify_upgrade_hardware.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/verify_upgrade_hardware.html">
        Verify the upgrade hardware
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Prepare the nodes for upgrade"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/prepare_nodes_for_upgrade.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/prepare_nodes_for_upgrade.html">
        Prepare the nodes for upgrade
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Manage storage encryption using the Onboard Key Manager"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/manage_storage_encryption_using_okm.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/manage_storage_encryption_using_okm.html">
        Manage storage encryption using the Onboard Key Manager
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 2. Relocate resources and retire node1"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 2. Relocate resources and retire node1</div>-->
         Stage 2. Relocate resources and retire node1
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/stage_2_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/stage_2_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate non-root aggregates and NAS data LIFs owned by node1 to node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/relocate_non_root_aggr_and_nas_data_lifs_node1_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/relocate_non_root_aggr_and_nas_data_lifs_node1_node2.html">
        Relocate non-root aggregates and NAS data LIFs owned by node1 to node2
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate failed or vetoed aggregates"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/relocate_failed_or_vetoed_aggr.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/relocate_failed_or_vetoed_aggr.html">
        Relocate failed or vetoed aggregates
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Retire node1"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/retire_node1.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/retire_node1.html">
        Retire node1
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Replace the node1 system modules"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/replace_node1_system_modules.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/replace_node1_system_modules.html">
        Replace the node1 system modules
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Netboot node1"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/netboot_node1.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/netboot_node1.html">
        Netboot node1
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 3. Boot node1 with the replacement system modules"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 3. Boot node1 with the replacement system modules</div>-->
         Stage 3. Boot node1 with the replacement system modules
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/stage_3_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/stage_3_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Boot node1 with the replacement system modules"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/boot_node1_with_a900_controller_and_nvs.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/boot_node1_with_a900_controller_and_nvs.html">
        Boot node1 with the replacement system modules
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify the node1 installation"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/verify_node1_installation.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/verify_node1_installation.html">
        Verify the node1 installation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Restore key-manager configuration on the upgraded node1"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/restore_key_manager_config_upgraded_node1.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/restore_key_manager_config_upgraded_node1.html">
        Restore key-manager configuration on the upgraded node1
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move non-root aggregates and NAS data LIFs owned by node1 from node2 to the upgraded node1"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/move_non_root_aggr_nas_lifs_node1_from_node2_to_upgraded_node1.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/move_non_root_aggr_nas_lifs_node1_from_node2_to_upgraded_node1.html">
        Move non-root aggregates and NAS data LIFs owned by node1 from node2 to the upgraded node1
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 4. Relocate resources and retire node2"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 4. Relocate resources and retire node2</div>-->
         Stage 4. Relocate resources and retire node2
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/stage_4_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/stage_4_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate non-root aggregates and NAS data LIFs from node2 to node1"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/relocate_non_root_aggr_nas_lifs_from_node2_to_node1.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/relocate_non_root_aggr_nas_lifs_from_node2_to_node1.html">
        Relocate non-root aggregates and NAS data LIFs from node2 to node1
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Retire node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/retire_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/retire_node2.html">
        Retire node2
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 5. Install the replacement system modules on node2"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 5. Install the replacement system modules on node2</div>-->
         Stage 5. Install the replacement system modules on node2
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/stage_5_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/stage_5_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Install the replacement system modules on node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/install_replacement_system_modules_on_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/install_replacement_system_modules_on_node2.html">
        Install the replacement system modules on node2
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Netboot node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/netboot_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/netboot_node2.html">
        Netboot node2
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 6. Boot node2 with the replacement system modules"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 6. Boot node2 with the replacement system modules</div>-->
         Stage 6. Boot node2 with the replacement system modules
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/stage_6_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/stage_6_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Boot node2 with the replacement system modules"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/boot_node2_with_a900_controller_and_nvs.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/boot_node2_with_a900_controller_and_nvs.html">
        Boot node2 with the replacement system modules
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify the node2 installation"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/verify_node2_installation.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/verify_node2_installation.html">
        Verify the node2 installation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Restore key-manager configuration on node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/restore_key_manager_config_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/restore_key_manager_config_node2.html">
        Restore key-manager configuration on node2
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move non-root aggregates and NAS data LIFs back to node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/move_non_root_aggr_and_nas_data_lifs_back_to_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/move_non_root_aggr_and_nas_data_lifs_back_to_node2.html">
        Move non-root aggregates and NAS data LIFs back to node2
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 7. Complete the upgrade"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 7. Complete the upgrade</div>-->
         Stage 7. Complete the upgrade
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/stage_7_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/stage_7_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Manage authentication using KMIP servers"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/manage-authentication-using-kmip-servers.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/manage-authentication-using-kmip-servers.html">
        Manage authentication using KMIP servers
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Confirm that the new controllers are set up correctly"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/ensure_new_controllers_are_set_up_correctly.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/ensure_new_controllers_are_set_up_correctly.html">
        Confirm that the new controllers are set up correctly
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set up Storage Encryption on the new controller module"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/set_up_storage_encryption_new_module.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/set_up_storage_encryption_new_module.html">
        Set up Storage Encryption on the new controller module
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set up NetApp Volume or Aggregate Encryption on the new controller module"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/set_up_netapp_volume_encryption_new_module.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/set_up_netapp_volume_encryption_new_module.html">
        Set up NetApp Volume or Aggregate Encryption on the new controller module
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Decommission the old system"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/decommission_old_system.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/decommission_old_system.html">
        Decommission the old system
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Resume SnapMirror operations"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/resume_snapmirror_operations.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/resume_snapmirror_operations.html">
        Resume SnapMirror operations
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Troubleshoot (upgrade to AFF A900 or FAS9500)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Troubleshoot</div>-->
         Troubleshoot
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/troubleshoot_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/troubleshoot_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Aggregate relocation failures"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/aggregate_relocation_failures.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/aggregate_relocation_failures.html">
        Aggregate relocation failures
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Reboots, panics, or power cycles"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/reboots_panics_or_power_cycles.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/reboots_panics_or_power_cycles.html">
        Reboots, panics, or power cycles
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Issues that can arise in multiple stages of the procedure"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/issues_in_multiple_stages_of_procedure.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/issues_in_multiple_stages_of_procedure.html">
        Issues that can arise in multiple stages of the procedure
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="LIF migration failure"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/lif_migration_failure.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/lif_migration_failure.html">
        LIF migration failure
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="References"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-affa900/other_references.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/other_references.html">
        References
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Use "system controller replace" commands to upgrade controller hardware running ONTAP 9.8 or later"
      data-li-level="2" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-2  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Use "system controller replace" commands to upgrade controller hardware running ONTAP 9.8 or later</div>-->
         Use "system controller replace" commands to upgrade controller hardware running ONTAP 9.8 or later
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/index.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Automate the controller upgrade process"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/automate_the_controller_upgrade_process.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/automate_the_controller_upgrade_process.html">
        Automate the controller upgrade process
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Decide whether to use the aggregate relocation content"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/decide_to_use_the_aggregate_relocation_guide.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/decide_to_use_the_aggregate_relocation_guide.html">
        Decide whether to use the aggregate relocation content
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Required tools and documentation"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/required_tools_and_documentation.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/required_tools_and_documentation.html">
        Required tools and documentation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Guidelines for upgrading controllers with ARL"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/guidelines_for_upgrading_controllers_with_arl.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/guidelines_for_upgrading_controllers_with_arl.html">
        Guidelines for upgrading controllers with ARL
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify the health of the MetroCluster configuration"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/verify_health_of_metrocluster_config.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/verify_health_of_metrocluster_config.html">
        Verify the health of the MetroCluster configuration
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Check for MetroCluster configuration errors"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/check_for_metrocluster_config_errors.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/check_for_metrocluster_config_errors.html">
        Check for MetroCluster configuration errors
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify switchover, healing, and switchback"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/verify_switchover_healing_switchback.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/verify_switchover_healing_switchback.html">
        Verify switchover, healing, and switchback
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview of the ARL upgrade"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/overview_of_the_arl_upgrade.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/overview_of_the_arl_upgrade.html">
        Overview of the ARL upgrade
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 1. Prepare for upgrade (upgrade with ‘system controller replace’ in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 1. Prepare for upgrade</div>-->
         Stage 1. Prepare for upgrade
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/stage_1_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/stage_1_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Prepare the nodes for upgrade"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/prepare_nodes_for_upgrade.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/prepare_nodes_for_upgrade.html">
        Prepare the nodes for upgrade
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Manage storage encryption using the Onboard Key Manager"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/manage_storage_encryption_using_okm.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/manage_storage_encryption_using_okm.html">
        Manage storage encryption using the Onboard Key Manager
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 2. Relocate and retire node1 (upgrade with ‘system controller replace’ in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 2. Relocate and retire node1</div>-->
         Stage 2. Relocate and retire node1
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/stage_2_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/stage_2_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate non-root aggregates and NAS data LIFs owned by node1 to node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/relocate_non_root_aggr_nas_data_lifs_node1_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/relocate_non_root_aggr_nas_data_lifs_node1_node2.html">
        Relocate non-root aggregates and NAS data LIFs owned by node1 to node2
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate failed or vetoed aggregates"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/relocate_failed_or_vetoed_aggr.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/relocate_failed_or_vetoed_aggr.html">
        Relocate failed or vetoed aggregates
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Retire node1"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/retire_node1.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/retire_node1.html">
        Retire node1
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Prepare for netboot"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/prepare_for_netboot.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/prepare_for_netboot.html">
        Prepare for netboot
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 3. Install and boot node3 (upgrade with ‘system controller replace’ in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 3. Install and boot node3</div>-->
         Stage 3. Install and boot node3
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/stage_3_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/stage_3_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Install and boot node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/install_boot_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/install_boot_node3.html">
        Install and boot node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set the FC or UTA/UTA2 configuration on node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/set_fc_or_uta_uta2_config_on_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/set_fc_or_uta_uta2_config_on_node3.html">
        Set the FC or UTA/UTA2 configuration on node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify the node3 installation"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/verify_node3_installation.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/verify_node3_installation.html">
        Verify the node3 installation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Restore key-manager configuration on node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/restore_key-manager_configuration_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/restore_key-manager_configuration_node3.html">
        Restore key-manager configuration on node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move non-root aggregates and NAS data LIFs owned by node1 from node2 to node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/move_non-root_aggr_and_nas_data_lifs_node1_from_node2_to_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/move_non-root_aggr_and_nas_data_lifs_node1_from_node2_to_node3.html">
        Move non-root aggregates and NAS data LIFs owned by node1 from node2 to node3
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 4. Relocate and retire node2 (upgrade with ‘system controller replace’ in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 4. Relocate and retire node2</div>-->
         Stage 4. Relocate and retire node2
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/stage_4_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/stage_4_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate non-root aggregates and NAS data LIFs from node2 to node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/relocate_non_root_aggr_nas_lifs_from_node2_to_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/relocate_non_root_aggr_nas_lifs_from_node2_to_node3.html">
        Relocate non-root aggregates and NAS data LIFs from node2 to node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Retire node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/retire_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/retire_node2.html">
        Retire node2
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 5. Install and boot node4 (upgrade with ‘system controller replace’ in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 5. Install and boot node4</div>-->
         Stage 5. Install and boot node4
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/stage_5_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/stage_5_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Install and boot node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/install_boot_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/install_boot_node4.html">
        Install and boot node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set the FC or UTA/UTA2 configuration on node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/set_fc_or_uta_uta2_config_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/set_fc_or_uta_uta2_config_node4.html">
        Set the FC or UTA/UTA2 configuration on node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify the node4 installation"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/verify_node4_installation.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/verify_node4_installation.html">
        Verify the node4 installation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Restore key-manager configuration on node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/restore_key-manager_config_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/restore_key-manager_config_node4.html">
        Restore key-manager configuration on node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move non-root aggregates and NAS data LIFs owned by node2 from node3 to node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/move_non_root_aggr_and_nas_data_lifs_node2_from_node3_to_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/move_non_root_aggr_and_nas_data_lifs_node2_from_node3_to_node4.html">
        Move non-root aggregates and NAS data LIFs owned by node2 from node3 to node4
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 6. Complete the upgrade (upgrade with ‘system controller replace’ in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 6. Complete the upgrade</div>-->
         Stage 6. Complete the upgrade
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/stage_6_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/stage_6_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Manage authentication using KMIP servers"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/manage-authentication-using-kmip-servers.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/manage-authentication-using-kmip-servers.html">
        Manage authentication using KMIP servers
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Confirm that the new controllers are set up correctly"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/ensure_new_controllers_are_set_up_correctly.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/ensure_new_controllers_are_set_up_correctly.html">
        Confirm that the new controllers are set up correctly
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set up Storage Encryption on the new controller module"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/set_up_storage_encryption_new_module.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/set_up_storage_encryption_new_module.html">
        Set up Storage Encryption on the new controller module
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set up NetApp Volume or Aggregate Encryption on the new controller module"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/set_up_netapp_volume_encryption_new_module.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/set_up_netapp_volume_encryption_new_module.html">
        Set up NetApp Volume or Aggregate Encryption on the new controller module
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Decommission the old system"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/decommission_old_system.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/decommission_old_system.html">
        Decommission the old system
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Resume SnapMirror operations"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/resume_snapmirror_operations.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/resume_snapmirror_operations.html">
        Resume SnapMirror operations
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Troubleshoot (upgrade with ‘system controller replace’ in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Troubleshoot</div>-->
         Troubleshoot
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/troubleshoot_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/troubleshoot_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Aggregate relocation failures"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/aggregate_relocation_failures.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/aggregate_relocation_failures.html">
        Aggregate relocation failures
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Reboots, panics, or power cycles"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/reboots_panics_or_power_cycles.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/reboots_panics_or_power_cycles.html">
        Reboots, panics, or power cycles
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Issues that can arise in multiple stages of the procedure"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/issues_in_multiple_stages_of_procedure.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/issues_in_multiple_stages_of_procedure.html">
        Issues that can arise in multiple stages of the procedure
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="LIF migration failure"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/lif_migration_failure.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/lif_migration_failure.html">
        LIF migration failure
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="References"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto-app/other_references.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/other_references.html">
        References
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Manually upgrade controller hardware running ONTAP 9.8 or later"
      data-li-level="2" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-2  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Manually upgrade controller hardware running ONTAP 9.8 or later</div>-->
         Manually upgrade controller hardware running ONTAP 9.8 or later
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/index.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Decide whether to use the aggregate relocation content"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/decide_to_use_arl_guide.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/decide_to_use_arl_guide.html">
        Decide whether to use the aggregate relocation content
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="ARL upgrade workflow"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/arl_upgrade_workflow.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/arl_upgrade_workflow.html">
        ARL upgrade workflow
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Guidelines for upgrading controllers with ARL"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/guidelines_upgrade_with_arl.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/guidelines_upgrade_with_arl.html">
        Guidelines for upgrading controllers with ARL
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Required tools and documentation"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/required_tools_documentation.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/required_tools_documentation.html">
        Required tools and documentation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Worksheet: Information to collect before and during the controller upgrade"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/worksheet_information_before_during_upgrade.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/worksheet_information_before_during_upgrade.html">
        Worksheet: Information to collect before and during the controller upgrade
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 1. Prepare for upgrade (manual upgrade in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 1. Prepare for upgrade</div>-->
         Stage 1. Prepare for upgrade
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/stage_1_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/stage_1_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Determine whether the controller has aggregates on internal disk drives"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/determine_aggregates_on_internal_drives.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/determine_aggregates_on_internal_drives.html">
        Determine whether the controller has aggregates on internal disk drives
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Prepare the nodes for upgrade"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/prepare_nodes_for_upgrade.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/prepare_nodes_for_upgrade.html">
        Prepare the nodes for upgrade
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Manage authentication keys using the Onboard Key Manager"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/manage_authentication_okm.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/manage_authentication_okm.html">
        Manage authentication keys using the Onboard Key Manager
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Quiesce the SnapMirror relationships"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/quiesce_snapmirror_relationships.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/quiesce_snapmirror_relationships.html">
        Quiesce the SnapMirror relationships
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Prepare for netboot"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/prepare_for_netboot.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/prepare_for_netboot.html">
        Prepare for netboot
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 2. Relocate and retire node1 (manual upgrade in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 2. Relocate and retire node1</div>-->
         Stage 2. Relocate and retire node1
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/stage_2_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/stage_2_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate non-root aggregates from node1 to node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/relocate_non_root_aggr_node1_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/relocate_non_root_aggr_node1_node2.html">
        Relocate non-root aggregates from node1 to node2
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move NAS data LIFs owned by node1 to node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/move_nas_lifs_node1_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/move_nas_lifs_node1_node2.html">
        Move NAS data LIFs owned by node1 to node2
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Record node1 information"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/record_node1_information.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/record_node1_information.html">
        Record node1 information
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Retire node1"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/retire_node1.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/retire_node1.html">
        Retire node1
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 3. Install and boot node3 (manual upgrade in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 3. Install and boot node3</div>-->
         Stage 3. Install and boot node3
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/stage_3_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/stage_3_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Install and boot node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/install_boot_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/install_boot_node3.html">
        Install and boot node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set the FC or UTA/UTA2 configuration on node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/set_fc_uta_uta2_config_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/set_fc_uta_uta2_config_node3.html">
        Set the FC or UTA/UTA2 configuration on node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Map ports from node1 to node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/map_ports_node1_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/map_ports_node1_node3.html">
        Map ports from node1 to node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move NAS data LIFs owned by node1 from node2 to node3 and verify SAN LIFs on node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/move_nas_lifs_node1_from_node2_node3_verify_san_lifs_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/move_nas_lifs_node1_from_node2_node3_verify_san_lifs_node3.html">
        Move NAS data LIFs owned by node1 from node2 to node3 and verify SAN LIFs on node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Worksheet: Information to record before moving NAS data LIFs to node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/worksheet_information_before_moving_san_lifs_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/worksheet_information_before_moving_san_lifs_node3.html">
        Worksheet: Information to record before moving NAS data LIFs to node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate non-root aggregates from node2 to node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/relocate_non_root_aggr_node2_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/relocate_non_root_aggr_node2_node3.html">
        Relocate non-root aggregates from node2 to node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move NAS data LIFs owned by node2 to node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/move_nas_lifs_node2_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/move_nas_lifs_node2_node3.html">
        Move NAS data LIFs owned by node2 to node3
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 4. Record information and retire node2 (manual upgrade in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 4. Record information and retire node2</div>-->
         Stage 4. Record information and retire node2
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/stage_4_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/stage_4_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Record node2 information"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/record_node2_information.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/record_node2_information.html">
        Record node2 information
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Retire node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/retire_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/retire_node2.html">
        Retire node2
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 5. Install and boot node4 (manual upgrade in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 5. Install and boot node4</div>-->
         Stage 5. Install and boot node4
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/stage_5_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/stage_5_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Install and boot node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/install_boot_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/install_boot_node4.html">
        Install and boot node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set the FC or UTA/UTA2 configuarion on node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/set_fc_uta_uta2_config_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/set_fc_uta_uta2_config_node4.html">
        Set the FC or UTA/UTA2 configuarion on node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Map ports from node2 to node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/map_ports_node2_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/map_ports_node2_node4.html">
        Map ports from node2 to node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move NAS data LIFs owned by node2 from node3 to node4 and verify SAN LIFs on node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/move_nas_lifs_node2_from_node3_node4_verify_san_lifs_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/move_nas_lifs_node2_from_node3_node4_verify_san_lifs_node4.html">
        Move NAS data LIFs owned by node2 from node3 to node4 and verify SAN LIFs on node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Worksheet: Information to record before moving NAS data LIFs to node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/worksheet_information_before_moving_san_lifs_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/worksheet_information_before_moving_san_lifs_node4.html">
        Worksheet: Information to record before moving NAS data LIFs to node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate node2's non-root aggregates from node3 to node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/relocate_node2_non_root_aggr_node3_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/relocate_node2_non_root_aggr_node3_node4.html">
        Relocate node2's non-root aggregates from node3 to node4
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 6. Complete the upgrade (manual upgrade in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 6. Complete the upgrade</div>-->
         Stage 6. Complete the upgrade
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/stage_6_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/stage_6_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Manage authentication using KMIP servers"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/manage_authentication_kmip.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/manage_authentication_kmip.html">
        Manage authentication using KMIP servers
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Confirm that the new controllers are set up correctly"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/ensure_controllers_set_up_correctly.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/ensure_controllers_set_up_correctly.html">
        Confirm that the new controllers are set up correctly
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set up Storage Encryption on the new controller module"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/set_up_storage_encryption_new_controller.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/set_up_storage_encryption_new_controller.html">
        Set up Storage Encryption on the new controller module
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set up NetApp Volume or Aggregate Encryption on the new controller module"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/set_up_netapp_encryption_on_new_controller.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/set_up_netapp_encryption_on_new_controller.html">
        Set up NetApp Volume or Aggregate Encryption on the new controller module
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Decommission the old system"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/decommission_old_system.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/decommission_old_system.html">
        Decommission the old system
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Resume SnapMirror operations"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/resume_snapmirror_ops.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/resume_snapmirror_ops.html">
        Resume SnapMirror operations
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Troubleshoot (manual upgrade in ONTAP 9.8 or later)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Troubleshoot</div>-->
         Troubleshoot
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/troubleshoot_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/troubleshoot_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Aggregate relocation failures"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/aggregate_relocation_failures.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/aggregate_relocation_failures.html">
        Aggregate relocation failures
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Reboots, panics, or power cycles"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/reboots_panics_power_cycles.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/reboots_panics_power_cycles.html">
        Reboots, panics, or power cycles
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Issues that can arise in multiple stages of the procedure"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/issues_multiple_stages_of_procedure.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/issues_multiple_stages_of_procedure.html">
        Issues that can arise in multiple stages of the procedure
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="LIF migration failure"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/lif_migration_failure.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/lif_migration_failure.html">
        LIF migration failure
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="LIFs are on invalid ports after upgrade"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/lifs_invalid_ports_after_upgrade.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/lifs_invalid_ports_after_upgrade.html">
        LIFs are on invalid ports after upgrade
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="References"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual-app/other_references.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/other_references.html">
        References
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Use "system controller replace" commands to upgrade controller hardware running ONTAP 9.5 to 9.7"
      data-li-level="2" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-2  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Use "system controller replace" commands to upgrade controller hardware running ONTAP 9.5 to 9.7</div>-->
         Use "system controller replace" commands to upgrade controller hardware running ONTAP 9.5 to 9.7
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/index.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Automate the controller upgrade process"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/automate_the_controller_upgrade_process.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/automate_the_controller_upgrade_process.html">
        Automate the controller upgrade process
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Decide whether to use the aggregate relocation content"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/decide_to_use_the_aggregate_relocation_guide.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/decide_to_use_the_aggregate_relocation_guide.html">
        Decide whether to use the aggregate relocation content
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Required tools and documentation"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/required_tools_and_documentation.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/required_tools_and_documentation.html">
        Required tools and documentation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Guidelines for upgrading controllers with ARL"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/guidelines_for_upgrading_controllers_with_arl.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/guidelines_for_upgrading_controllers_with_arl.html">
        Guidelines for upgrading controllers with ARL
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify the health of the MetroCluster configuration"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/verify_health_of_metrocluster_config.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/verify_health_of_metrocluster_config.html">
        Verify the health of the MetroCluster configuration
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Check for MetroCluster configuration errors"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/check_metrocluster_config_errors.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/check_metrocluster_config_errors.html">
        Check for MetroCluster configuration errors
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify switchover, healing, and switchback"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/verify_switchover_healing_switchback.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/verify_switchover_healing_switchback.html">
        Verify switchover, healing, and switchback
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview of the ARL upgrade"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/overview_of_the_arl_upgrade.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/overview_of_the_arl_upgrade.html">
        Overview of the ARL upgrade
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 1. Prepare for upgrade (upgrade with ‘system controller replace’ in ONTAP 9.5 to 9.7)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 1. Prepare for upgrade</div>-->
         Stage 1. Prepare for upgrade
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/stage_1_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/stage_1_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Prepare the nodes for upgrade"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/prepare_nodes_for_upgrade.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/prepare_nodes_for_upgrade.html">
        Prepare the nodes for upgrade
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Manage Storage Encryption using the Onboard Key Manager"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/manage_storage_encryption_using_okm.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/manage_storage_encryption_using_okm.html">
        Manage Storage Encryption using the Onboard Key Manager
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 2. Relocate and retire node1 (upgrade with ‘system controller replace’ in ONTAP 9.5 to 9.7)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 2. Relocate and retire node1</div>-->
         Stage 2. Relocate and retire node1
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/stage_2_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/stage_2_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate non-root aggregates and NAS data LIFs owned by node1 to node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/relocate_non_root_aggr_and_nas_data_lifs_node1_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/relocate_non_root_aggr_and_nas_data_lifs_node1_node2.html">
        Relocate non-root aggregates and NAS data LIFs owned by node1 to node2
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate failed or vetoed aggregates"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/relocate_failed_or_vetoed_aggr.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/relocate_failed_or_vetoed_aggr.html">
        Relocate failed or vetoed aggregates
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Retire node1"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/retire_node1.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/retire_node1.html">
        Retire node1
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Prepare for netboot"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/prepare_for_netboot.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/prepare_for_netboot.html">
        Prepare for netboot
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 3. Install and boot node3 (upgrade with ‘system controller replace’ in ONTAP 9.5 to 9.7)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 3. Install and boot node3</div>-->
         Stage 3. Install and boot node3
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/stage_3_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/stage_3_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Install and boot node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/install_boot_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/install_boot_node3.html">
        Install and boot node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set the FC or UTA/UTA2 configuration on node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/set_fc_or_uta_uta2_config_on_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/set_fc_or_uta_uta2_config_on_node3.html">
        Set the FC or UTA/UTA2 configuration on node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Map ports from node1 to node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/map_ports_node1_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node1_node3.html">
        Map ports from node1 to node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Join the quorum when a node has a different set of network ports"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/join_quorum_node_has_different_ports_stage3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/join_quorum_node_has_different_ports_stage3.html">
        Join the quorum when a node has a different set of network ports
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify the node3 installation"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/verify_node3_installation.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/verify_node3_installation.html">
        Verify the node3 installation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move non-root aggregates and NAS data LIFs owned by node1 from node2 to node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/move_non_root_aggr_nas_lifs_node1_from_node2_to_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/move_non_root_aggr_nas_lifs_node1_from_node2_to_node3.html">
        Move non-root aggregates and NAS data LIFs owned by node1 from node2 to node3
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 4. Relocate and retire node2 (upgrade with ‘system controller replace’ in ONTAP 9.5 to 9.7)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 4. Relocate and retire node2</div>-->
         Stage 4. Relocate and retire node2
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/stage_4_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/stage_4_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate non-root aggregates and NAS data LIFs from node2 to node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/relocate_non_root_aggr_nas_lifs_from_node2_to_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/relocate_non_root_aggr_nas_lifs_from_node2_to_node3.html">
        Relocate non-root aggregates and NAS data LIFs from node2 to node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Retire node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/retire_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/retire_node2.html">
        Retire node2
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 5. Install and boot node4 (upgrade with ‘system controller replace’ in ONTAP 9.5 to 9.7)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 5. Install and boot node4</div>-->
         Stage 5. Install and boot node4
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/stage_5_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/stage_5_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Install and boot node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/install_boot_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/install_boot_node4.html">
        Install and boot node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set the FC or UTA/UTA2 configuration on node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/set_fc_or_uta_uta2_config_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/set_fc_or_uta_uta2_config_node4.html">
        Set the FC or UTA/UTA2 configuration on node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Map ports from node2 to node4"
      data-li-level="4#" 
      class="  ie-sidebar-selected    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html">
        Map ports from node2 to node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Join the quorum when a node has a different set of network ports"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/join_quorum_node_has_different_ports_stage5.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/join_quorum_node_has_different_ports_stage5.html">
        Join the quorum when a node has a different set of network ports
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify the node4 installation"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/verify_node4_installation.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/verify_node4_installation.html">
        Verify the node4 installation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move non-root aggregates and NAS data LIFs owned by node2 from node3 to node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/move_non_root_aggr_and_nas_data_lifs_node2_from_node3_to_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/move_non_root_aggr_and_nas_data_lifs_node2_from_node3_to_node4.html">
        Move non-root aggregates and NAS data LIFs owned by node2 from node3 to node4
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 6. Complete the upgrade (upgrade with ‘system controller replace’ in ONTAP 9.5 to 9.7)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 6. Complete the upgrade</div>-->
         Stage 6. Complete the upgrade
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/stage_6_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/stage_6_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Manage authentication using KMIP servers"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/manage-authentication-using-kmip-servers.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/manage-authentication-using-kmip-servers.html">
        Manage authentication using KMIP servers
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Confirm that the new controllers are set up correctly"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/ensure_new_controllers_are_set_up_correctly.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/ensure_new_controllers_are_set_up_correctly.html">
        Confirm that the new controllers are set up correctly
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set up Storage Encryption on the new controller module"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/set_up_storage_encryption_new_module.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/set_up_storage_encryption_new_module.html">
        Set up Storage Encryption on the new controller module
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set up NetApp Volume or Aggregate Encryption on the new controller module"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/set_up_netapp_volume_encryption_new_module.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/set_up_netapp_volume_encryption_new_module.html">
        Set up NetApp Volume or Aggregate Encryption on the new controller module
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Decommission the old system"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/decommission_old_system.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/decommission_old_system.html">
        Decommission the old system
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Resume SnapMirror operations"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/resume_snapmirror_operations.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/resume_snapmirror_operations.html">
        Resume SnapMirror operations
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Troubleshoot (upgrade with ‘system controller replace’ in ONTAP 9.5 to 9.7)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Troubleshoot</div>-->
         Troubleshoot
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/troubleshoot_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/troubleshoot_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Aggregate relocation failures"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/aggregate_relocation_failures.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/aggregate_relocation_failures.html">
        Aggregate relocation failures
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Reboots, panics, or power cycles"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/reboots_panics_or_power_cycles.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/reboots_panics_or_power_cycles.html">
        Reboots, panics, or power cycles
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Issues that can arise in multiple stages of the procedure"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/issues_in_multiple_stages_of_procedure.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/issues_in_multiple_stages_of_procedure.html">
        Issues that can arise in multiple stages of the procedure
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="LIF migration failure"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/lif_migration_failure.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/lif_migration_failure.html">
        LIF migration failure
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="References"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-auto/other_references.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/other_references.html">
        References
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Manually upgrade controller hardware running ONTAP 9.7 or earlier"
      data-li-level="2" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-2  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Manually upgrade controller hardware running ONTAP 9.7 or earlier</div>-->
         Manually upgrade controller hardware running ONTAP 9.7 or earlier
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/index.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Decide whether to use the aggregate relocation content"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/decide_to_use_arl_guide.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/decide_to_use_arl_guide.html">
        Decide whether to use the aggregate relocation content
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="ARL upgrade workflow"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/arl_upgrade_workflow.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/arl_upgrade_workflow.html">
        ARL upgrade workflow
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Guidelines for upgrading controllers with ARL"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/guidelines_upgrade_with_arl.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/guidelines_upgrade_with_arl.html">
        Guidelines for upgrading controllers with ARL
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Required tools and documentation"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/required_tools_documentation.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/required_tools_documentation.html">
        Required tools and documentation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Worksheet: Information to collect before and during the controller upgrade"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/worksheet_information_before_during_upgrade.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/worksheet_information_before_during_upgrade.html">
        Worksheet: Information to collect before and during the controller upgrade
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Reconfigure the FC switch layout for ONTAP 9.1 or later"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Reconfigure the FC switch layout for ONTAP 9.1 or later</div>-->
         Reconfigure the FC switch layout for ONTAP 9.1 or later
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/reconfig_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/reconfig_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Send a custom AutoSupport message prior to reconfiguring switches"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/send_custom_asup_message_prior_reconfig_switches.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/send_custom_asup_message_prior_reconfig_switches.html">
        Send a custom AutoSupport message prior to reconfiguring switches
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify the health of the MetroCluster configuration"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/verify_health_mcc_config.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/verify_health_mcc_config.html">
        Verify the health of the MetroCluster configuration
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Check for MetroCluster configuration errors"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/check_mcc_config_errors.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/check_mcc_config_errors.html">
        Check for MetroCluster configuration errors
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Persistently disable the switches"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/persist_disable_switches.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/persist_disable_switches.html">
        Persistently disable the switches
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Determine the new cabling layout"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/determine_new_cabling_layout.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/determine_new_cabling_layout.html">
        Determine the new cabling layout
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Apply RCF files and recable the switches"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/apply_RCF_files_recable_switches.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/apply_RCF_files_recable_switches.html">
        Apply RCF files and recable the switches
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Persistently enable the switches"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/persist_enable_switches.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/persist_enable_switches.html">
        Persistently enable the switches
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify switchover, healing, and switchback"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/verify_swtichover_healing_switchback.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/verify_swtichover_healing_switchback.html">
        Verify switchover, healing, and switchback
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 1. Prepare for upgrade (manual upgrade in ONTAP 9.7 or earlier)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 1. Prepare for upgrade</div>-->
         Stage 1. Prepare for upgrade
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/stage_1_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/stage_1_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Determine whether the controller has aggregates on internal disk drives"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/determine_aggregates_on_internal_drives.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/determine_aggregates_on_internal_drives.html">
        Determine whether the controller has aggregates on internal disk drives
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Prepare the nodes for upgrade"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/prepare_nodes_for_upgrade.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/prepare_nodes_for_upgrade.html">
        Prepare the nodes for upgrade
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Manage authentication keys using the Onboard Key Manager"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/manage_authentication_okm.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/manage_authentication_okm.html">
        Manage authentication keys using the Onboard Key Manager
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Quiesce the SnapMirror relationships"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/quiesce_snapmirror_relationships.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/quiesce_snapmirror_relationships.html">
        Quiesce the SnapMirror relationships
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Prepare for netboot"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/prepare_for_netboot.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/prepare_for_netboot.html">
        Prepare for netboot
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 2. Relocate and retire node1 (manual upgrade in ONTAP 9.7 or earlier)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 2. Relocate and retire node1</div>-->
         Stage 2. Relocate and retire node1
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/stage_2_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/stage_2_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate non-root aggregates from node1 to node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/relocate_non_root_aggr_node1_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/relocate_non_root_aggr_node1_node2.html">
        Relocate non-root aggregates from node1 to node2
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move NAS data LIFs owned by node1 to node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/move_nas_lifs_node1_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/move_nas_lifs_node1_node2.html">
        Move NAS data LIFs owned by node1 to node2
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Record node1 information"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/record_node1_information.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/record_node1_information.html">
        Record node1 information
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Retire node1"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/retire_node1.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/retire_node1.html">
        Retire node1
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 3. Install and boot node3 (manual upgrade in ONTAP 9.7 or earlier)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 3. Install and boot node3</div>-->
         Stage 3. Install and boot node3
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/stage_3_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/stage_3_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Install and boot node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/install_boot_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/install_boot_node3.html">
        Install and boot node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set the FC or UTA/UTA2 configuration on node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/set_fc_uta_uta2_config_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/set_fc_uta_uta2_config_node3.html">
        Set the FC or UTA/UTA2 configuration on node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Map ports from node1 to node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/map_ports_node1_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/map_ports_node1_node3.html">
        Map ports from node1 to node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify the node3 installation"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/verify_node3_installation.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/verify_node3_installation.html">
        Verify the node3 installation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move NAS data LIFs owned by node1 from node2 to node3 and verify SAN LIFs on node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/move_nas_lifs_node1_from_node2_node3_verify_san_lifs_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/move_nas_lifs_node1_from_node2_node3_verify_san_lifs_node3.html">
        Move NAS data LIFs owned by node1 from node2 to node3 and verify SAN LIFs on node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Worksheet: Information to record before moving NAS data LIFs to node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/worksheet_information_before_moving_san_lifs_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/worksheet_information_before_moving_san_lifs_node3.html">
        Worksheet: Information to record before moving NAS data LIFs to node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate non-root aggregates from node2 to node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/relocate_non_root_aggr_node2_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/relocate_non_root_aggr_node2_node3.html">
        Relocate non-root aggregates from node2 to node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move NAS data LIFs owned by node2 to node3"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/move_nas_lifs_node2_node3.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/move_nas_lifs_node2_node3.html">
        Move NAS data LIFs owned by node2 to node3
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 4. Record information and retire node2 (manual upgrade in ONTAP 9.7 or earlier)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 4. Record information and retire node2</div>-->
         Stage 4. Record information and retire node2
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/stage_4_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/stage_4_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Record node2 information"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/record_node2_information.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/record_node2_information.html">
        Record node2 information
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Retire node2"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/retire_node2.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/retire_node2.html">
        Retire node2
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 5. Install and boot node4 (manual upgrade in ONTAP 9.7 or earlier)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 5. Install and boot node4</div>-->
         Stage 5. Install and boot node4
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/stage_5_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/stage_5_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Install and boot node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/install_boot_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/install_boot_node4.html">
        Install and boot node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set the FC or UTA/UTA2 configuarion on node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/set_fc_uta_uta2_config_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/set_fc_uta_uta2_config_node4.html">
        Set the FC or UTA/UTA2 configuarion on node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Map ports from node2 to node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/map_ports_node2_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/map_ports_node2_node4.html">
        Map ports from node2 to node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Verify the node4 installation"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/verify_node4_installation.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/verify_node4_installation.html">
        Verify the node4 installation
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move NAS data LIFs owned by node2 from node3 to node4 and verify SAN LIFs on node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/move_nas_lifs_node2_from_node3_node4_verify_san_lifs_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/move_nas_lifs_node2_from_node3_node4_verify_san_lifs_node4.html">
        Move NAS data LIFs owned by node2 from node3 to node4 and verify SAN LIFs on node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Worksheet: Information to record before moving NAS data LIFs to node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/worksheet_information_before_moving_san_lifs_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/worksheet_information_before_moving_san_lifs_node4.html">
        Worksheet: Information to record before moving NAS data LIFs to node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Relocate node2's non-root aggregates from node3 to node4"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/relocate_node2_non_root_aggr_node3_node4.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/relocate_node2_non_root_aggr_node3_node4.html">
        Relocate node2's non-root aggregates from node3 to node4
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Stage 6. Complete the upgrade (manual upgrade in ONTAP 9.7 or earlier)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Stage 6. Complete the upgrade</div>-->
         Stage 6. Complete the upgrade
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/stage_6_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/stage_6_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Manage authentication using KMIP servers"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/manage_authentication_kmip.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/manage_authentication_kmip.html">
        Manage authentication using KMIP servers
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Confirm that the new controllers are set up correctly"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/ensure_controllers_set_up_correctly.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/ensure_controllers_set_up_correctly.html">
        Confirm that the new controllers are set up correctly
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set up Storage Encryption on the new controller module"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/set_up_storage_encryption_new_controller.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/set_up_storage_encryption_new_controller.html">
        Set up Storage Encryption on the new controller module
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set up NetApp Volume or Aggregate Encryption on the new controller module"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/set_up_netapp_encryption_on_new_controller.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/set_up_netapp_encryption_on_new_controller.html">
        Set up NetApp Volume or Aggregate Encryption on the new controller module
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Decommission the old system"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/decommission_old_system.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/decommission_old_system.html">
        Decommission the old system
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Resume SnapMirror operations"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/resume_snapmirror_ops.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/resume_snapmirror_ops.html">
        Resume SnapMirror operations
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Troubleshoot (manual upgrade in ONTAP 9.7 or earlier)"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Troubleshoot</div>-->
         Troubleshoot
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/troubleshoot_index.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/troubleshoot_index.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Aggregate relocation failures"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/aggregate_relocation_failures.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/aggregate_relocation_failures.html">
        Aggregate relocation failures
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Reboots, panics, or power cycles"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/reboots_panics_power_cycles.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/reboots_panics_power_cycles.html">
        Reboots, panics, or power cycles
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Issues that can arise in multiple stages of the procedure"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/issues_multiple_stages_of_procedure.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/issues_multiple_stages_of_procedure.html">
        Issues that can arise in multiple stages of the procedure
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="LIF migration failure"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/lif_migration_failure.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/lif_migration_failure.html">
        LIF migration failure
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="LIFs are on invalid ports after upgrade"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/lifs_invalid_ports_after_upgrade.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/lifs_invalid_ports_after_upgrade.html">
        LIFs are on invalid ports after upgrade
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="References"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade-arl-manual/other_references.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/other_references.html">
        References
      </a></li></ul></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Upgrade by moving volumes or storage"
      data-li-level="1" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-1  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Upgrade by moving volumes or storage</div>-->
         Upgrade by moving volumes or storage
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="2#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-decide-to-use-this-guide.html" 
    ><a class="ie-sidebar-menuitem-2 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-decide-to-use-this-guide.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Considerations"
      data-li-level="2#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-considerations.html" 
    ><a class="ie-sidebar-menuitem-2 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-considerations.html">
        Considerations
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Upgrade by moving storage"
      data-li-level="2" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-2  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Upgrade by moving storage</div>-->
         Upgrade by moving storage
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Workflow"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-by-moving-storage-parent.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-by-moving-storage-parent.html">
        Workflow
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Prepare"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-prepare-when-moving-storage.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-prepare-when-moving-storage.html">
        Prepare
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Shut down original nodes"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-shutdown-remove-original-nodes.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-shutdown-remove-original-nodes.html">
        Shut down original nodes
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Remove disk ownership"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-remove-disk-ownership-new-nodes.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-remove-disk-ownership-new-nodes.html">
        Remove disk ownership
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Reset default configuration"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-reset-default-configuration-node3-and-node4.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-reset-default-configuration-node3-and-node4.html">
        Reset default configuration
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Install new nodes"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-install-new-nodes.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-install-new-nodes.html">
        Install new nodes
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Set up new nodes"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-set-up-new-nodes.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-set-up-new-nodes.html">
        Set up new nodes
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Optional - Move internal storage or convert to drive shelf"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Optional - Move internal storage or convert to drive shelf</div>-->
         Optional - Move internal storage or convert to drive shelf
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-optional-move-internal-storage.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-optional-move-internal-storage.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move internal drives"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-move-internal-drives.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-move-internal-drives.html">
        Move internal drives
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Convert node to drive shelf"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-convert-node-to-shelf.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-convert-node-to-shelf.html">
        Convert node to drive shelf
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Attach storage shelves and reassign disk ownership"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-attach-shelves-reassign-disks.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-attach-shelves-reassign-disks.html">
        Attach storage shelves and reassign disk ownership
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Restore root volume configuration"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-restore-root-volume-config.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-restore-root-volume-config.html">
        Restore root volume configuration
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Complete upgrade"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Complete upgrade</div>-->
         Complete upgrade
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-complete.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-complete.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Complete in ONTAP 9.8 or later"
      data-li-level="4" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-4  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Complete in ONTAP 9.8 or later</div>-->
         Complete in ONTAP 9.8 or later
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="5#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-complete-ontap-9-8.html" 
    ><a class="ie-sidebar-menuitem-5 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-complete-ontap-9-8.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Map network ports using ONTAP 9.8"
      data-li-level="5#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-map-network-ports-ontap-9-8.html" 
    ><a class="ie-sidebar-menuitem-5 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-map-network-ports-ontap-9-8.html">
        Map network ports using ONTAP 9.8
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Perform final steps in ONTAP 9.8"
      data-li-level="5#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-final-upgrade-steps-in-ontap-9-8.html" 
    ><a class="ie-sidebar-menuitem-5 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-final-upgrade-steps-in-ontap-9-8.html">
        Perform final steps in ONTAP 9.8
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Complete in ONTAP 9.7 or earlier"
      data-li-level="4" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-4  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Complete in ONTAP 9.7 or earlier</div>-->
         Complete in ONTAP 9.7 or earlier
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="5#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-complete-ontap-9-7-or-earlier.html" 
    ><a class="ie-sidebar-menuitem-5 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-complete-ontap-9-7-or-earlier.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Map network ports using ONTAP 9.7 or earlier"
      data-li-level="5#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-map-network-ports-ontap-9-7-or-earlier.html" 
    ><a class="ie-sidebar-menuitem-5 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-map-network-ports-ontap-9-7-or-earlier.html">
        Map network ports using ONTAP 9.7 or earlier
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Perform final steps in ONTAP 9.7 or earlier"
      data-li-level="5#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-final-steps-ontap-9-7-or-earlier-move-storage.html" 
    ><a class="ie-sidebar-menuitem-5 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-final-steps-ontap-9-7-or-earlier-move-storage.html">
        Perform final steps in ONTAP 9.7 or earlier
      </a></li></ul></li></ul></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Upgrade by moving volumes"
      data-li-level="2" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-2  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Upgrade by moving volumes</div>-->
         Upgrade by moving volumes
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Workflow"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-by-moving-volumes-parent.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-by-moving-volumes-parent.html">
        Workflow
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Prepare"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-prepare-when-moving-volumes.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-prepare-when-moving-volumes.html">
        Prepare
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Install and join new nodes"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-install-and-join-new-nodes-move-vols.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-install-and-join-new-nodes-move-vols.html">
        Install and join new nodes
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move Linux iSCSI hosts to the new nodes"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade_move_linux_iscsi_hosts_to_new_nodes.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade_move_linux_iscsi_hosts_to_new_nodes.html">
        Move Linux iSCSI hosts to the new nodes
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Create an aggregate and move volumes to the new nodes"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-create-aggregate-move-volumes.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-create-aggregate-move-volumes.html">
        Create an aggregate and move volumes to the new nodes
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move non-SAN data LIFs and cluster management LIFs"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-move-lifs-to-new-nodes.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-move-lifs-to-new-nodes.html">
        Move non-SAN data LIFs and cluster management LIFs
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Move, delete, or create SAN LIFS"
      data-li-level="3" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-3  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Move, delete, or create SAN LIFS</div>-->
         Move, delete, or create SAN LIFS
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Overview"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade_move_delete_recreate_san_lifs.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade_move_delete_recreate_san_lifs.html">
        Overview
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Considerations for moving SAN LIFs"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade_considerations_move_san_lifs.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade_considerations_move_san_lifs.html">
        Considerations for moving SAN LIFs
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Delete SAN LIFs"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-delete-san-lifs.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-delete-san-lifs.html">
        Delete SAN LIFs
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Create new SAN LIFs or re-create deleted SAN LIFs"
      data-li-level="4#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade_create_recreate_san_lifs.html" 
    ><a class="ie-sidebar-menuitem-4 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade_create_recreate_san_lifs.html">
        Create new SAN LIFs or re-create deleted SAN LIFs
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Unjoin original nodes"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-unjoin-original-nodes-move-volumes.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-unjoin-original-nodes-move-volumes.html">
        Unjoin original nodes
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Complete upgrade"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade-complete-move-volumes.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade-complete-move-volumes.html">
        Complete upgrade
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Upgrade AFF A250 to AFF A400 by converting to a drive shelf"
      data-li-level="2" 
      class=" sidebar-folder    "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-2  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/ontap-systems-upgrade/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/ontap-systems-upgrade/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Upgrade AFF A250 to AFF A400 by converting to a drive shelf</div>-->
         Upgrade AFF A250 to AFF A400 by converting to a drive shelf
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Workflow"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade_aff_a250_to_aff_a400_ndu_upgrade_workflow.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade_aff_a250_to_aff_a400_ndu_upgrade_workflow.html">
        Workflow
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Migrate LIFs and data aggregates on node2 to node1"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade_migrate_lifs_aggregates_node2_to_node1.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade_migrate_lifs_aggregates_node2_to_node1.html">
        Migrate LIFs and data aggregates on node2 to node1
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Convert node2 to a drive shelf and connect to node4"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade_convert_node2_drive_shelf_connect_node4.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade_convert_node2_drive_shelf_connect_node4.html">
        Convert node2 to a drive shelf and connect to node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Reassign drives from node2 to node4"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade_reassign_drives_node2_to_node4.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade_reassign_drives_node2_to_node4.html">
        Reassign drives from node2 to node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Migrate data aggregates, epsilon, and LIFs on node1 to node4"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade_migrate_aggregates_epsilon_lifs_node1_to_node4.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade_migrate_aggregates_epsilon_lifs_node1_to_node4.html">
        Migrate data aggregates, epsilon, and LIFs on node1 to node4
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Convert node1 to a drive shelf and connect to node3"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade_convert_node1_drive_shelf_connect_node3.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade_convert_node1_drive_shelf_connect_node3.html">
        Convert node1 to a drive shelf and connect to node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Reassign drives from node1 to node3"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade_reassign_drives_node1_to_node3.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade_reassign_drives_node1_to_node3.html">
        Reassign drives from node1 to node3
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Migrate LIFs and data aggregates on node4 to node3"
      data-li-level="3#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/upgrade/upgrade_migrate_lIFs_aggregates_node4_node3.html" 
    ><a class="ie-sidebar-menuitem-3 " href="/us-en/ontap-systems-upgrade/upgrade/upgrade_migrate_lIFs_aggregates_node4_node3.html">
        Migrate LIFs and data aggregates on node4 to node3
      </a></li></ul></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Legal notices"
      data-li-level="1#" 
      class="   "
      dale-page-url="/upgrade-arl-auto/map_ports_node2_node4.html" 
      dale-entry-url="/legal-notices.html" 
    ><a class="ie-sidebar-menuitem-1 " href="/us-en/ontap-systems-upgrade/legal-notices.html">
        Legal notices
      </a></li></ul>
</div>
<script>

  $(".ie-sidebar-button").click(function (e) {
    e.preventDefault();
    e.stopPropagation();

    expandedLI = $('li.ie-sidebar-expand')

    const li = $(this).closest("li");

    const parentsLI = $(li).parents('li');

    expandedLI.map(element => {
      if (sidebarAccordion && !li.hasClass('ie-sidebar-expand') && jQuery.inArray(expandedLI[element], parentsLI) == -1) {
        $(expandedLI[element]).toggleClass('ie-sidebar-expand');
        $(expandedLI[element]).children("ul").animate({ height: 'toggle' }, 400, function () {
          $(li).children("ul").toggleClass('ie-sidebar-open');

        })
      }

    })

    $(li).toggleClass('ie-sidebar-expand');
    $(li).children("ul").animate({ height: 'toggle' }, 400, function () {
      $(li).children("ul").toggleClass('ie-sidebar-open');
    })
  });


  
    $("li.ie-sidebar-selected").parents('ul').toggleClass("ie-sidebar-open");
    $("li.ie-sidebar-selected").toggleClass("ie-sidebar-expand")
    $("ul.ie-sidebar-open").parent().toggleClass("ie-sidebar-expand");
    $("li.ie-sidebar-selected").children('ul').toggleClass("ie-sidebar-open")
  
  
</script>
    </div>
</div>
<script>

    
    let sidebarScrollTopPosition = 0;
    $("#ie-new-toc").on("scroll", function () {
        if (sidebarScrollTopPosition == 0) {
            $.cookie("sidebarScroll", $("#ie-new-toc").scrollTop(), {
                path: "/us-en/ontap-systems-upgrade"
            });
        }

        if ($("#ie-new-toc").scrollTop() > 0) {
            $('#ie-product-identity-lockup').addClass('ie-addShadow');
        } else {
            $('#ie-product-identity-lockup').removeClass('ie-addShadow');
        }
    });

    $(function () {
        if ($.cookie("sidebarScroll")) {
            $("#ie-new-toc").scrollTop($.cookie("sidebarScroll"));
        }
    });

    function setSidebarBottom() {
        const footerGap = PXinViewport($(".n-footer"));
        document.getElementById("ie-new-sidebar").style.bottom = Math.max(0, footerGap) + "px";
    }

    window.onscroll = () => {
        setSidebarBottom();
    };

    $("#sidebar-collapse").click(function (e) {
        const sidebarWidth = $("#ie-new-sidebar").width() - $("#ie-new-sidebar-collapse").width();
        e.preventDefault();
        const width = $(".ie-content-pane").width();
        const marginLeft = parseInt($(".ie-content-pane").css('marginLeft'));

        if ($.cookie("sidebarScroll")) {
            sidebarScrollTopPosition = $.cookie("sidebarScroll");
        }

        $("#ie-new-sidebar").animate({ width: 'toggle' }, 350, function () {
            $("#ie-new-sidebar-collapse").show();
            $("#ie-new-sidebar").removeClass("open")
            $("#ie-new-sidebar").addClass("close")
            $("#ie-new-sidebar").removeAttr("style")
        });
        $(".ie-content-pane").animate({ width: (width + sidebarWidth), marginLeft: (marginLeft - sidebarWidth) }, 350, function () {
            resizeContent()
        })

    });
    $("#sidebar-expand").click(function (e) {
        const sidebarWidth = $("#ie-new-sidebar").width() - $("#ie-new-sidebar-collapse").width();
        e.preventDefault();
        const width = $(".ie-content-pane").width();
        const marginLeft = parseInt($(".ie-content-pane").css('marginLeft'));

        $("#ie-new-sidebar").animate({ width: 'toggle' }, 250, function () {
            $('#ie-new-sidebar').css('display', 'flex');
            $("#ie-new-sidebar-collapse").hide();
            $("#ie-new-sidebar").removeClass("close")
            $("#ie-new-sidebar").addClass("open")
            setSidebarBottom();

            if (sidebarScrollTopPosition != 0) {
                $.cookie("sidebarScroll", sidebarScrollTopPosition, {
                    path: "/us-en/ontap-systems-upgrade"
                })
                $("#ie-new-toc").scrollTop(sidebarScrollTopPosition);
                sidebarScrollTopPosition = 0;
            }
        });
        $(".ie-content-pane").animate({ width: (width - sidebarWidth), 'marginLeft': (marginLeft + sidebarWidth) }, 250, function () {
            resizeContent()
        })
    });
    function resizeContent() {
        const sidebarWidth = $("#ie-new-sidebar").width() - $("#ie-new-sidebar-collapse").width();
        const rightNavbarVisible =  $("#ie-right-navbar").css('display') && $("#ie-right-navbar").css('display') != 'none';
        const sidebarVisible = $("#ie-new-sidebar").css('display') != 'none';
        const rightNavbarWidth = $("#ie-right-navbar").width();
        const rightNavbarCollapseWidth = $("#ie-right-navbar-collapse").width();
        const rightNavbarCollapseVisible = $("#ie-right-navbar-collapse").css('display') && $("#ie-right-navbar-collapse").css('display') != 'none';
        
        if (rightNavbarVisible && sidebarVisible) {
            $(".ie-content-pane").width(`calc(100% - ${sidebarWidth + rightNavbarWidth}px)`)
            $(".ie-content-pane").css('marginLeft', `${sidebarWidth}px`)
        } else if (sidebarVisible) {
            $(".ie-content-pane").css('marginLeft', `${sidebarWidth}px`)
            if (rightNavbarCollapseVisible) {
                $(".ie-content-pane").width(`calc(100% - ${sidebarWidth + rightNavbarCollapseWidth}px)`)
            } else {
                $(".ie-content-pane").width(`calc(100% - ${$("#ie-new-sidebar").width()}px)`)
            }

        } else if (rightNavbarVisible) {
            $(".ie-content-pane").css('marginLeft', `${$("#ie-new-sidebar-collapse").width()}px`)
            $(".ie-content-pane").width(`calc(100% - ${rightNavbarWidth}px)`)
        } else {
            $(".ie-content-pane").css('marginLeft', `${$("#ie-new-sidebar-collapse").width()}px`)
            if (rightNavbarCollapseVisible) {
                $(".ie-content-pane").width(`calc(100% - ${rightNavbarCollapseWidth}px)`);
            } else {
                $(".ie-content-pane").width(`calc(100% - ${$("#ie-new-sidebar-collapse").width()}px) `);
            }
            
        }
    }
    $(window).on("resize load", function () {
        setSidebarBottom();
        resizeContent()
    });


</script>

<div class="ie-content-pane ie-component-detail-content ie-component-detail-content--show-code">
    <!-- Begin of page container --><article class="page-content" id="main">
      <!-- include utility.html -->
      <div class="ie-component-detail-heading-wrap">
  <h1 class="ie-component-detail-heading">Map ports from node2 to node4</h1>
</div>

<div id="ie-byline">
  
<div class="page-details">
    
        
            <time datetime="2023-11-08 10:03:11 +0000">11/08/2023</time>
        
    
    
        <span>Contributors
            <a target="_blank" class="ext-link-indicator" href="https://github.com/netapp-pcarriga"><img  class="avatar avatar-small" alt="netapp-pcarriga" width="20" height="20" src="https://avatars.githubusercontent.com/u/77334475?v=4" style="border-radius: 50%;"/></a>
        
            <a target="_blank" class="ext-link-indicator" href="https://github.com/netapp-aoife"><img  class="avatar avatar-small" alt="netapp-aoife" width="20" height="20" src="https://avatars.githubusercontent.com/u/92876203?v=4" style="border-radius: 50%;"/></a>
        
            <a target="_blank" class="ext-link-indicator" href="https://github.com/netapp-martyh"><img  class="avatar avatar-small" alt="netapp-martyh" width="20" height="20" src="https://avatars.githubusercontent.com/u/66496079?v=4" style="border-radius: 50%;"/></a>
        
        </span>
    
    
</div>
<div class="page-controls">
    <div id="contribute-dropdown" class="custom-dropdown custom-dropdown-contrib" >
        <div class="custom-dropdown-select custom-dropdown-select-contrib">
        <span class="contrib-name"><img src="/us-en/ontap-systems-upgrade/images/discuss-sm.svg" alt="" class="github-icon" />Suggest changes</span>
        <img src="/us-en/ontap-systems-upgrade/images/dropdown-arrow.svg" alt="" class="custom-icon chevrondown invisible" />
        <img src="/us-en/ontap-systems-upgrade/images/dropdown-arrow.svg" alt="" class="custom-icon chevronup" />
        </div>
        <ul class="custom-dropdown-menu suggested-changes-dropdown"><li>
                <a target="_blank" href="https://github.com/NetAppDocs/ontap-systems-upgrade/issues/new?template=new-from-page.yml&page-url=https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html&page-title=Map ports from node2 to node4" class="page-nav-contribute-link" role="button">Request doc changes</a>
            </li><li> 
                <a target="_blank" href="https://github.com/NetAppDocs/ontap-systems-upgrade/blob/main/upgrade-arl-auto/map_ports_node2_node4.adoc" class="page-nav-contribute-link" role="button">Edit this page</a>
            </li><li><a target="_blank" href="https://docs.netapp.com/us-en/contribute/" class="page-nav-contribute-link"  >Learn how to contribute</a></li>
        </ul>
    </div>
    <div id="pdf-control-container">
        <div class="n-pdf-header">
            <a id="toggleButtonPdf" class="n-pdf-button" type="button">
                <img class="adobe-icon" src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>PDFs<img src="/us-en/ontap-systems-upgrade/images/dropdown-arrow.svg" class="custom-icon" alt="" />
            </a>
        </div>
        <div class="n-pdf-body-container">
            <ul id="toggleContainerPdf" class="n-pdf-body" style="display:none;"><li class="pdf-ux-container">
                    
                    
                    
                    <a target="_blank" class="pdf-download-link" href="/us-en/ontap-systems-upgrade/pdfs/fullsite-sidebar/AFF_and_FAS_System_Upgrade_Documentation.pdf" >
                    <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>PDF of this doc site</a>





    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Upgrade_by_using_aggregate_relocation.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Upgrade by using aggregate relocation
          </a>
          



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Use__system_controller_replace__commands_to_upgrade_controller_models_in_the_same_chassis.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Use "system controller replace" commands to upgrade controller models in the same chassis
          </a>
          











    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_1__Prepare_for_upgrade__upgrade_to_AFF_A900_or_FAS9500_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 1. Prepare for upgrade
          </a>
          








        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_2__Relocate_resources_and_retire_node1.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 2. Relocate resources and retire node1
          </a>
          












        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_3__Boot_node1_with_the_replacement_system_modules.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 3. Boot node1 with the replacement system modules
          </a>
          










        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_4__Relocate_resources_and_retire_node2.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 4. Relocate resources and retire node2
          </a>
          






        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_5__Install_the_replacement_system_modules_on_node2.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 5. Install the replacement system modules on node2
          </a>
          






        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_6__Boot_node2_with_the_replacement_system_modules.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 6. Boot node2 with the replacement system modules
          </a>
          










        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_7__Complete_the_upgrade.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 7. Complete the upgrade
          </a>
          














        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Troubleshoot__upgrade_to_AFF_A900_or_FAS9500_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Troubleshoot
          </a>
          










        </li>
      </ul>
    

  




        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Use__system_controller_replace__commands_to_upgrade_controller_hardware_running_ONTAP_9_8_or_later.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Use "system controller replace" commands to upgrade controller hardware running ONTAP 9.8 or later
          </a>
          



















    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_1__Prepare_for_upgrade__upgrade_with__system_controller_replace__in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 1. Prepare for upgrade
          </a>
          






        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_2__Relocate_and_retire_node1__upgrade_with__system_controller_replace__in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 2. Relocate and retire node1
          </a>
          










        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_3__Install_and_boot_node3__upgrade_with__system_controller_replace__in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 3. Install and boot node3
          </a>
          












        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_4__Relocate_and_retire_node2__upgrade_with__system_controller_replace__in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 4. Relocate and retire node2
          </a>
          






        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_5__Install_and_boot_node4__upgrade_with__system_controller_replace__in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 5. Install and boot node4
          </a>
          












        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_6__Complete_the_upgrade__upgrade_with__system_controller_replace__in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 6. Complete the upgrade
          </a>
          














        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Troubleshoot__upgrade_with__system_controller_replace__in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Troubleshoot
          </a>
          










        </li>
      </ul>
    

  




        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Manually_upgrade_controller_hardware_running_ONTAP_9_8_or_later.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Manually upgrade controller hardware running ONTAP 9.8 or later
          </a>
          













    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_1__Prepare_for_upgrade__manual_upgrade_in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 1. Prepare for upgrade
          </a>
          












        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_2__Relocate_and_retire_node1__manual_upgrade_in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 2. Relocate and retire node1
          </a>
          










        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_3__Install_and_boot_node3__manual_upgrade_in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 3. Install and boot node3
          </a>
          
















        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_4__Record_information_and_retire_node2__manual_upgrade_in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 4. Record information and retire node2
          </a>
          






        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_5__Install_and_boot_node4__manual_upgrade_in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 5. Install and boot node4
          </a>
          














        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_6__Complete_the_upgrade__manual_upgrade_in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 6. Complete the upgrade
          </a>
          














        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Troubleshoot__manual_upgrade_in_ONTAP_9_8_or_later_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Troubleshoot
          </a>
          












        </li>
      </ul>
    

  




        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Use__system_controller_replace__commands_to_upgrade_controller_hardware_running_ONTAP_9_5_to_9_7.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Use "system controller replace" commands to upgrade controller hardware running ONTAP 9.5 to 9.7
          </a>
          



















    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_1__Prepare_for_upgrade__upgrade_with__system_controller_replace__in_ONTAP_9_5_to_9_7_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 1. Prepare for upgrade
          </a>
          






        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_2__Relocate_and_retire_node1__upgrade_with__system_controller_replace__in_ONTAP_9_5_to_9_7_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 2. Relocate and retire node1
          </a>
          










        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_3__Install_and_boot_node3__upgrade_with__system_controller_replace__in_ONTAP_9_5_to_9_7_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 3. Install and boot node3
          </a>
          














        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_4__Relocate_and_retire_node2__upgrade_with__system_controller_replace__in_ONTAP_9_5_to_9_7_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 4. Relocate and retire node2
          </a>
          






        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_5__Install_and_boot_node4__upgrade_with__system_controller_replace__in_ONTAP_9_5_to_9_7_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 5. Install and boot node4
          </a>
          






    <ul class="subfolders" id="pdf-remove" style="display:none;"><li class="active"></li></ul>
  








        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_6__Complete_the_upgrade__upgrade_with__system_controller_replace__in_ONTAP_9_5_to_9_7_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 6. Complete the upgrade
          </a>
          














        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Troubleshoot__upgrade_with__system_controller_replace__in_ONTAP_9_5_to_9_7_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Troubleshoot
          </a>
          










        </li>
      </ul>
    

  




        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Manually_upgrade_controller_hardware_running_ONTAP_9_7_or_earlier.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Manually upgrade controller hardware running ONTAP 9.7 or earlier
          </a>
          













    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Reconfigure_the_FC_switch_layout_for_ONTAP_9_1_or_later.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Reconfigure the FC switch layout for ONTAP 9.1 or later
          </a>
          


















        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_1__Prepare_for_upgrade__manual_upgrade_in_ONTAP_9_7_or_earlier_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 1. Prepare for upgrade
          </a>
          












        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_2__Relocate_and_retire_node1__manual_upgrade_in_ONTAP_9_7_or_earlier_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 2. Relocate and retire node1
          </a>
          










        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_3__Install_and_boot_node3__manual_upgrade_in_ONTAP_9_7_or_earlier_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 3. Install and boot node3
          </a>
          


















        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_4__Record_information_and_retire_node2__manual_upgrade_in_ONTAP_9_7_or_earlier_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 4. Record information and retire node2
          </a>
          






        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_5__Install_and_boot_node4__manual_upgrade_in_ONTAP_9_7_or_earlier_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 5. Install and boot node4
          </a>
          
















        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_6__Complete_the_upgrade__manual_upgrade_in_ONTAP_9_7_or_earlier_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Stage 6. Complete the upgrade
          </a>
          














        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Troubleshoot__manual_upgrade_in_ONTAP_9_7_or_earlier_.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Troubleshoot
          </a>
          












        </li>
      </ul>
    

  




        </li>
      </ul>
    

  


        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Upgrade_by_moving_volumes_or_storage.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Upgrade by moving volumes or storage
          </a>
          





    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Upgrade_by_moving_storage.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Upgrade by moving storage
          </a>
          















    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Optional___Move_internal_storage_or_convert_to_drive_shelf.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Optional - Move internal storage or convert to drive shelf
          </a>
          






        </li>
      </ul>
    

  







    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Complete_upgrade.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Complete upgrade
          </a>
          



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Complete_in_ONTAP_9_8_or_later.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Complete in ONTAP 9.8 or later
          </a>
          






        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Complete_in_ONTAP_9_7_or_earlier.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Complete in ONTAP 9.7 or earlier
          </a>
          






        </li>
      </ul>
    

  


        </li>
      </ul>
    

  


        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Upgrade_by_moving_volumes.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Upgrade by moving volumes
          </a>
          













    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Move__delete__or_create_SAN_LIFS.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Move, delete, or create SAN LIFS
          </a>
          








        </li>
      </ul>
    

  






        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Upgrade_AFF_A250_to_AFF_A400_by_converting_to_a_drive_shelf.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf-icon.png" alt="" width="16" height="16"/>
            Upgrade AFF A250 to AFF A400 by converting to a drive shelf
          </a>
          
















        </li>
      </ul>
    

  


        </li>
      </ul>
    

  



</li></ul>
            <div class="zip-pdf-link-container" style="display: none;">   
                <a href="#" id="zipPdf">
                <img src="/us-en/ontap-systems-upgrade/images/pdf-zip.png" alt="" width="16" height="16"/>
                <pre>Collection of separate PDF docs<span class="zip-size"></span></pre>
                </a><div id="zip-link-popup" class="hide">
    <div class="inner-modal">
        <div class="downloading-progress">
            <div class="spinner"></div>
            <h1>Creating your file...</h1>
            <div>This may take a few minutes. Thanks for your patience.</div>
            <button class="cancel-download-btn" type="button">Cancel</button>
        </div>
        <div class="download-complete hide">
            <div class="done-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>
            </div>
            <div>Your file is ready</div>
            <button class="cancel-download-btn" type="button">OK</button>
        </div>
    </div>
</div>
<script>
    $(".cancel-download-btn").click(function(){
        $("#zip-link-popup").addClass("hide");
        $("#zip-link-popup .downloading-progress").removeClass("hide");
        $("#zip-link-popup .download-complete").addClass("hide");
    });
</script></div>
        </div>
    </div>        
<script>
$("#toggleContainerPdf li.active:last-child").parents('ul.subfolders').toggle('display');
$("#toggleButtonPdf").on('click', function(e){ 
    e.stopPropagation();
    $("#toggleContainerPdf").toggle('display');
    $(".n-pdf-body-container .zip-pdf-link-container").toggle('display');
});

//hide is by clicking outside pdfcontainer
$(document).on('click', function (e) {
    if ($('#toggleContainerPdf').is(':visible') && !$('.n-pdf-body-container').is(e.target) && !$('.n-pdf-body-container').has(e.target).length)  {
        
        $("#toggleContainerPdf").toggle('display');
        $(".n-pdf-body-container .zip-pdf-link-container").toggle('display');
        $("#toggleButtonPdf").removeClass("active");
    }
});
</script>
<script>
    function getPdfLocation() {
        const pdfLocation = window.scrollX + document.querySelector('#pdf-control-container').getBoundingClientRect().left
        if (pdfLocation < 450) {
            $(".n-pdf-body-container").addClass("block")
        } else {
            $(".n-pdf-body-container").removeClass("block")
        }
    
    }
    $( window ).on( "resize", function() {
        getPdfLocation()
} );
</script>
<script>
    const pdfButtonWidth =  $(".n-pdf-header").width();
    const pdfMenuWidth = $(".n-pdf-body-container").width();
    $(".n-pdf-body-container").css('margin-left', `calc(${pdfButtonWidth - pdfMenuWidth}px)`);
</script>
</div>

    

</div>




<div class="content-to-index">
<div class="paragraph lead">
<p>You must verify that the physical ports on node2 map correctly to the physical ports on node4, which will enable node4 to communicate with other nodes in the cluster and with the network after the upgrade.</p>
</div>
<div class="paragraph">
<div class="title">About this task</div>
<p>Refer to <a href="other_references.html">References</a> to link to the <em>Hardware Universe</em> to capture information about the ports on the new nodes. You will use the information later in this section.</p>
</div>
<div class="paragraph">
<p>The software configuration of node4 must match the physical connectivity of node4 and IP connectivity must be restored before you continue with the upgrade.</p>
</div>
<div class="paragraph">
<p>Port settings might vary, depending on the model of the nodes. You must make the original node&#8217;s port and LIF configuration compatible with what you plan the new node&#8217;s configuration to be. This is because the new node replays the same configuration when it boots, meaning when you boot node4 that Data ONTAP will try to host LIFs on the same ports that were used on node2.</p>
</div>
<div class="paragraph">
<p>Therefore, if the physical ports on node2 do not map directly to the physical ports on node4, then software configuration changes will be required to restore cluster, management, and network connectivity after the boot. In addition, if the cluster ports on node2 do not directly map to the cluster ports on node4, node4 might not automatically rejoin the quorum when it is rebooted until a software configuration change is made to host the cluster LIFs on the correct physical ports.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Record all the node2 cabling information for node2, the ports, broadcast domains, and IPspaces, in the table:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">LIF</th>
<th class="tableblock halign-left valign-top">Node2 ports</th>
<th class="tableblock halign-left valign-top">Node2 IPspaces</th>
<th class="tableblock halign-left valign-top">Node2 broadcast domains</th>
<th class="tableblock halign-left valign-top">Node4 ports</th>
<th class="tableblock halign-left valign-top">Node4 IPspaces</th>
<th class="tableblock halign-left valign-top">Node4 broadcast domains</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster 4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node management</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster management</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data 1</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data 2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data 3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data 4</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SAN</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intercluster port</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Record all the cabling information for node4, the ports, broadcast domains, and IPspaces, in the table.</p>
</li>
<li>
<p>Follow these steps to verify if the setup is a two-node switchless cluster:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Set the privilege level to advanced:</p>
<div class="paragraph">
<p><code>cluster::&gt; set -privilege advanced</code></p>
</div>
</li>
<li>
<p>Verify if the setup is a two-node switchless cluster:</p>
<div class="paragraph">
<p><code>cluster::&gt; network options switchless-cluster show</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster::*&gt; network options switchless-cluster show
Enable Switchless Cluster: false/true</pre>
</div>
</div>
<div class="paragraph">
<p>The value of this command must match the physical state of the system.</p>
</div>
</li>
<li>
<p>Return to the administration privilege level:</p>
<div class="listingblock">
<div class="content">
<pre>cluster::*&gt; set -privilege admin
cluster::&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Follow these steps to place node4 into quorum:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Boot node4. See <a href="install_boot_node4.html">Install and boot node4</a> to boot the node if you have not already done so.</p>
</li>
<li>
<p>Verify that the new cluster ports are in the Cluster broadcast domain:</p>
<div class="paragraph">
<p><code>network port show -node <em>node</em> -port <em>port</em> -fields broadcast-domain</code></p>
</div>
<div class="paragraph">
<p>The following example shows that port "e0a" is in the Cluster domain on node4:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster::&gt; network port show -node node4 -port e0a -fields broadcast-domain
node       port broadcast-domain
---------- ---- ---------------
node4      e0a  Cluster</pre>
</div>
</div>
</li>
<li>
<p>If the cluster ports are not in the Cluster broadcast-domain, add them with the following command:</p>
<div class="paragraph">
<p><code>broadcast-domain add-ports -ipspace Cluster -broadcast-domain Cluster -ports <em>node:port</em></code></p>
</div>
</li>
<li>
<p>Add the correct ports to the Cluster broadcast domain:</p>
<div class="paragraph">
<p><code>network port modify -node -port -ipspace Cluster -mtu 9000</code></p>
</div>
<div class="paragraph">
<p>This example adds Cluster port "e1b" on node4:</p>
</div>
<div class="paragraph">
<p><code>network port modify -node node4 -port e1b -ipspace Cluster -mtu 9000</code></p>
</div>
</li>
<li>
<p>Migrate the cluster LIFs to the new ports, once for each LIF:</p>
<div class="paragraph">
<p><code>network interface migrate -vserver Cluster -lif <em>lif_name</em> -source-node node4 destination-node node4 -destination-port <em>port_name</em></code></p>
</div>
</li>
<li>
<p>Modify the home port of the cluster LIFs:</p>
<div class="paragraph">
<p><code>network interface modify -vserver Cluster -lif <em>lif_name</em> –home-port <em>port_name</em></code></p>
</div>
</li>
<li>
<p>Remove the old ports from the Cluster broadcast domain:</p>
<div class="paragraph">
<p><code>network port broadcast-domain remove-ports</code></p>
</div>
<div class="paragraph">
<p>This command removes port "e0d" on node4:</p>
</div>
<div class="paragraph">
<p><code>network port broadcast-domain remove-ports -ipspace Cluster -broadcast-domain Cluster ‑ports node4:e0d</code></p>
</div>
</li>
<li>
<p>Verify that node4 has rejoined quorum:</p>
<div class="paragraph">
<p><code>cluster show -node node4 -fields health</code></p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><a id="auto_map_4_Step5"></a>Adjust the broadcast domains hosting your cluster LIFs and node-management/clustermanagement LIFs. Confirm that each broadcast domain contains the correct ports. A port cannot be moved between broadcast domains if it is hosting or is home to a LIF so you may need to migrate and modify the LIFs as shown in the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Display the home port of a LIF:</p>
<div class="paragraph">
<p><code>network interface show -fields home-node,home-port</code></p>
</div>
</li>
<li>
<p>Display the broadcast domain containing this port:</p>
<div class="paragraph">
<p><code>network port broadcast-domain show -ports <em>node_name:port_name</em></code></p>
</div>
</li>
<li>
<p>Add or remove ports from broadcast domains:</p>
<div class="paragraph">
<p><code>network port broadcast-domain add-ports</code><br>
<code>network port broadcast-domain remove-ports</code></p>
</div>
</li>
<li>
<p>Modify a LIF’s home port:</p>
<div class="paragraph">
<p><code>network interface modify -vserver <em>vserver</em> -lif <em>lif_name</em> –home-port <em>port_name</em></code></p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Adjust the intercluster broadcast domains and migrate the intercluster LIFs, if necessary, using the same commands shown in <a href="#auto_map_4_Step5">Step 5</a>.</p>
</li>
<li>
<p>Adjust any other broadcast domains and migrate the data LIFs, if necessary, using the same commands shown in <a href="#auto_map_4_Step5">Step 5</a>.</p>
</li>
<li>
<p>If there were any ports on node2 that no longer exist on node4, follow these steps to delete them:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Access the advanced privilege level on either node:</p>
<div class="paragraph">
<p><code>set -privilege advanced</code></p>
</div>
</li>
<li>
<p>To delete the ports:</p>
<div class="paragraph">
<p><code>network port delete -node <em>node_name</em> -port <em>port_name</em></code></p>
</div>
</li>
<li>
<p>Return to the admin level:</p>
<div class="paragraph">
<p><code>set -privilege admin</code></p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Adjust all the LIF failover groups:</p>
<div class="paragraph">
<p><code>network interface modify -failover-group <em>failover_group</em> -failover-policy <em>failover_policy</em></code></p>
</div>
<div class="paragraph">
<p>The following command sets the failover policy to <code>broadcast-domain-wide</code> and uses the ports in failover group <code>fg1</code> as failover targets for LIF <code>data1</code> on <code>node4</code>:</p>
</div>
<div class="paragraph">
<p><code>network interface modify -vserver node4 -lif data1 failover-policy broadcast-domainwide -failover-group fg1</code></p>
</div>
<div class="paragraph">
<p>Refer to <a href="other_references.html">References</a> to link to <em>Network Management</em> or the <em>ONTAP 9 Commands: Manual Page Reference</em> and see <em>Configuring failover settings on a LIF</em> for more information.</p>
</div>
</li>
<li>
<p>Verify the changes on node4:</p>
<div class="paragraph">
<p><code>network port show -node node4</code></p>
</div>
</li>
<li>
<p>Each cluster LIF must be listening on port 7700. Verify that the cluster LIFs are listening on port 7700:</p>
<div class="paragraph">
<p><code>::&gt; network connections listening show -vserver Cluster</code></p>
</div>
<div class="paragraph">
<p>Port 7700 listening on cluster ports is the expected outcome as shown in the following example for a two-node cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Cluster::&gt; network connections listening show -vserver Cluster
Vserver Name     Interface Name:Local Port     Protocol/Service
---------------- ----------------------------  -------------------
Node: NodeA
Cluster          NodeA_clus1:7700               TCP/ctlopcp
Cluster          NodeA_clus2:7700               TCP/ctlopcp
Node: NodeB
Cluster          NodeB_clus1:7700               TCP/ctlopcp
Cluster          NodeB_clus2:7700               TCP/ctlopcp
4 entries were displayed.</pre>
</div>
</div>
</li>
<li>
<p>For each cluster LIF that is not listening on port 7700, set the administrative status of the LIF to <code>down</code> and then <code>up</code>:</p>
<div class="paragraph">
<p><code>::&gt; net int modify -vserver Cluster -lif <em>cluster-lif</em> -status-admin down; net int modify -vserver Cluster -lif <em>cluster-lif</em> -status-admin up</code></p>
</div>
<div class="paragraph">
<p>Repeat step 11 to verify that the cluster LIF is now listening on port 7700.</p>
</div>
</li>
</ol>
</div>
</div>




    </article>
    <!-- Page Container -->
  </div>

  
  <!-- Start Page Toolbar -->
<div id="ie-right-navbar-collapse" class="close">
  <img id="navbar-expand" class="ie-searchbox-icon" src="/us-en/ontap-systems-upgrade/images/double_arrow.svg" alt="" />
</div>
<div id="ie-right-navbar" class="open">
  <div id="right-navbar-collapse">
    <img src="/us-en/ontap-systems-upgrade/images/double_arrow.svg" alt="" />
  </div>
  <div class="page-nav-container">
    <nav class="page-nav-fixed">
      <div class="page-nav-title">On this page</div>
      <div class="page-nav-links">
        <ul class="page-nav-inner" id="page-menu"></ul>
      </div>
    </nav>
  </div>
</div>


<script>
  resizeContent();
  function setRightBarHeight() {
    var h = 0;

    // header 1
    h += PXinViewport($('.n-footer'));
    h += PXinViewport($('#ie-new-header'));

    if ($('#ie-right-navbar').length) {
      $('#ie-right-navbar').css({ height: `calc(100vh - ${h}px)` });
    }
    if ($('.page-nav-links').length) {
      h += 98;
      $('.page-nav-links').css({ height: `calc(100vh - ${h}px)` });
    }
  }

  $(document).ready(function () {
    // PAGE NAV - Click
    const MASTHEAD_OFFSET = 65;
    const SECTIONS = $("main h2, main h3");
    let calculateActiveSection = false;
    setTimeout(() => {
      calculateActiveSection = true;
    }, 100)

    $(".page-nav__link").click(function (event) {
      calculateActiveSection = false;
      $(".page-nav__link").removeClass('page-nav__link--active');
      var target = $(event.target);
      target.addClass('page-nav__link--active');
      location.hash = event.target.hash;
      setTimeout(() => {
        calculateActiveSection = true;
      }, 100)

    });

    // PAGE NAV - Scroll
    $(window).on('resize scroll', function () {
      if (calculateActiveSection) {
        var activeSection = getActiveSection(SECTIONS, MASTHEAD_OFFSET);
        if (activeSection) {
          var activeHref = $(activeSection).attr('id');
          $(".page-nav__link").removeClass('page-nav__link--active');
          $("#page-menu a[href=#" + activeHref + "]").addClass('page-nav__link--active');
          if (location.hash != "#" + activeHref) {
            if (history.replaceState) {
              history.replaceState(null, null, "#" + activeHref);
            }
          }
        }
      }
    });

    $(".n-pdf-button").click(function () {
      $(this).toggleClass("active");
    });

    $.fn.isVisibleAndInViewport = function () {
      var elementTop = $(this).offset().top;
      var elementBottom = elementTop + $(this).outerHeight();

      var viewportTop = $(window).scrollTop();
      var viewportBottom = viewportTop + $(window).height();

      return elementBottom > viewportTop && elementTop < viewportBottom && $(this).is(":visible");
    };


    $(window).on('resize scroll', function () {
      setRightBarHeight();
    });

    $(window).trigger('resize');


  });

  $("#right-navbar-collapse").click(function (e) {
    const rightNavbarWidth = $("#ie-right-navbar").width() - $("#ie-right-navbar-collapse").width();
    e.preventDefault();
    const width = $(".ie-content-pane").width();

    $("#ie-right-navbar").animate({ width: 'toggle' }, 350, function () {
      $("#ie-right-navbar-collapse").removeClass("close")
      $("#ie-right-navbar-collapse").addClass("open")
      $("#ie-right-navbar").removeClass("open")
      $("#ie-right-navbar").addClass("close")
    });
    $(".ie-content-pane").animate({ width: (width + rightNavbarWidth) }, 350, function () {
      resizeContent()
      setSidebarBottom();
    })

  });
  $("#navbar-expand").click(function (e) {
    const rightNavbarWidth = $("#ie-right-navbar").width() - $("#ie-right-navbar-collapse").width();
    e.preventDefault();
    const width = $(".ie-content-pane").width();
    $("#ie-right-navbar").animate({ width: 'toggle' }, 250, function () {
      $("#ie-right-navbar-collapse").removeClass("open")
      $("#ie-right-navbar-collapse").addClass("close")
      $("#ie-right-navbar").removeClass("close")
      $("#ie-right-navbar").addClass("open")
      setRightBarHeight();
      setSidebarBottom();
    });
    $(".ie-content-pane").animate({ width: (width - rightNavbarWidth) }, 250, function () {
      resizeContent()
    })
  });

  function navbarResize() {
    const rightNavbarResized = $("#ie-right-navbar-collapse").hasClass('resized');
    if (window.innerWidth < 1024) {
      $("#ie-right-navbar").removeClass("open")
      $("#ie-right-navbar").addClass("close")
      $("#ie-right-navbar").removeAttr("style")
      $("#ie-right-navbar-collapse").removeClass("close")
      $("#ie-right-navbar-collapse").addClass("open")
      $("#ie-right-navbar-collapse").addClass("resized")
    } else {
      if (rightNavbarResized) {
        $('#ie-right-navbar').removeClass('close');
        $('#ie-right-navbar').addClass('open');
        $("#ie-right-navbar-collapse").removeClass("resized")
        $("#ie-right-navbar-collapse").removeClass("open")
        $("#ie-right-navbar-collapse").addClass("close")
      }
    }
    resizeContent()
  }
  navbarResize();
  $(window).on('resize load', function () {
    navbarResize()
  });

  function getActiveSection(sections, offset) {
    var scrollPosition = $(window).scrollTop() + offset + 5;
    var activeSection;
    for (var i = 0; i < sections.length; i++) {
      var el = $(sections[i]);
      var activePosition = el.offset().top;
      if (activePosition > scrollPosition) {
        break;
      }

      activeSection = sections[i];
    }

    return activeSection;
  }

  $("a[href*=#]:not([href=#])").click(function () {
    setTimeout(() => {
      $(window).trigger('scroll');
    }, 105)
  })

  const hashOnLoad = location.href.split("#")[1];
  setTimeout(function () {
    if (hashOnLoad) {
      $(".page-nav__link").removeClass('page-nav__link--active');
      $("#page-menu a[href=#" + hashOnLoad + "]").addClass('page-nav__link--active');
    }
  }, 100)

</script>


  <div style="clear: both"></div><!-- Main needs to have height --></div>

        </main>

        <footer class="n-footer">
  <div class="n-footer__bottom">
    <div class="n-container">
        <div class="n-footer__left">
          <li class="n-footer__copyright-link">
                    <a href="https://www.netapp.com/company/legal/copyright/">© 2023 NetApp, Inc.</a>
          </li>
        </div>
        <div class="n-footer__center">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/terms-of-use/">Terms of use</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/privacy-policy/">Privacy policy</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/cookie-policy/">Cookie policy</a>
            </li>
            <li class="n-footer__copyright-link">
              <a class="ot-sdk-show-settings">Cookie settings</a>
            </li>
          </ul>
       </div>
        <div class="n-footer__right">
              <li class="n-footer__copyright-link">
                <a target="_self" href="javascript:netapp_mailto()">Send feedback about this page</a>
              </li>
        </div>
     </div>
  </div>
</footer>

      </div><!-- Elasticsearch JS -->
      <script type="text/javascript" src='/us-en/ontap-systems-upgrade/js/bundle.js'></script>

      <!-- Syntax Highlighting -->
      <script type="text/javascript" src='/us-en/ontap-systems-upgrade/js/prism.js'></script>
      <script type="text/javascript" src='/us-en/ontap-systems-upgrade/js/prism-curl.js'></script>
    </div>
    <script>
      document.body.offsetWidth=1903;
      cookieLaw = {}
      cookieLaw.euCountry = "US";
      cookieLaw.invoke = function(){return false;}
    </script>
    <script src='/us-en/ontap-systems-upgrade/js/ie-tabbed-blocks.js'></script>
    <script src='/us-en/ontap-systems-upgrade/js/ie-sidebar.js'></script>
  </body>

</html>
